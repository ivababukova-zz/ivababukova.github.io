<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
<link href="../src/nv.d3.css" rel="stylesheet" type="text/css">
<style>

body {
  overflow-y: scroll;
}

.chart {
  padding: 0;
}

svg {
  position: relative;
  overflow: hidden;
  width: 960px;
  height: 500px;
  font: 10px sans-serif;
}

</style>
</head>
<body>

<div id="chart1" class="chart">
  <svg></svg>
</div>

<script type="text/javascript" src="../lib/d3.v3.js"></script>
<script type="text/javascript" src="../nv.d3.js"></script>
<script type="text/javascript" src="../src/utils.js"></script>
<script type="text/javascript" src="../src/models/parallelCoordinates.js"></script>

<script>


var chartData = [];

var chosen = ["Minimum_Registered_Voters", "Maximum_Registered_Voters"];

d3.json("../../data/referendum_data.json", 
  function (data) {

    for (var i = 0; i < data.length; i++) {
      chartData.push({"name": data[i]["City"]}); 
      
      for (var j = 0; j < chosen.length; j++)
        chartData[i][chosen[j]] = data[i][chosen[j]];
    }
    console.log(chartData);    
     var chart;
  nv.addGraph(function() {

    chart = nv.models.parallelCoordinates()
                  .dimensions(chosen);//["economy (mpg)", "cylinders", "displacement (cc)", "power (hp)", "weight (lb)", "0-60 mph (s)", "year"]);

    d3.select('#chart1 svg')
        .datum(data)
        .call(chart);

    // chart.dispatch.on('brush', function(e) {
    //   nv.log(e);
    // });

    nv.utils.windowResize(chart.update);

    return chart;

  });


 
  }
);

// [
//   {
//     "name": "Volvo Diesel",
//     "economy (mpg)": "30.7",
//     "cylinders": "6",
//     "displacement (cc)": "145",
//     "power (hp)": "76",
//     "weight (lb)": "3160",
//     "0-60 mph (s)": "19.6",
//     "year": "81"
//   }
// ]

    </script>
  </body>
</html>
